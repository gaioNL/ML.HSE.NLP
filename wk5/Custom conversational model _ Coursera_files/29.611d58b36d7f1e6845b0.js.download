(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"0Lal":function(module,exports,e){var t=e("db2b"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"0UBe":function(module,exports,e){var t=e("HKH7"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"2dz7":function(module,exports,e){var t=e("ubvS"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"3v1K":function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t(e("VbXa")),r=t(e("sbe7")),i=t(e("37kS")),n=e("l2sx"),s=t(e("YeA8")),o=t(e("Txc6")),d=e("kvW3"),l=t(e("Akn8")),u=t(e("sMNq")),c=t(e("7PCW")),m=e("4R3V");e("DnT3");var f=function(e){function PeerReviewAdminMessage(t,a){var r;return(r=e.call(this,t,a)||this).handleDeleteSubmission=function(){r.setState({isSubmissionDeleted:!0})},r.showOverrideTool=function(){r.setState({showOverrideTool:!0})},r.hideOverrideTool=function(){r.setState({showOverrideTool:!1})},r.showDeletionConfirm=function(){r.setState({showDeletionConfirm:!0})},r.hideDeletionConfirm=function(){r.setState({showDeletionConfirm:!1})},r.submitOverride=function(e,t){var a=r.props,i=a.computedItem,n=a.courseId;"loaded"===r.state.gradeOverrideDataState&&e>=0&&e<=100&&(r.setState({gradeOverrideDataState:"submittingOverride",gradeOverrideSubmittedOverride:{grade:e,explanation:t}}),u.default.updateOverride({learnerId:r.props.learnerId,courseId:n,itemId:i.id,grade:e/100,explanation:t}).then(function(){r.setState({gradeOverrideDataState:"loaded",gradeOverride:{grade:e,explanation:t},gradeOverrideSubmittedOverride:null,showOverrideTool:!1})}).catch(function(){r.setState({gradeOverrideDataState:"error",gradeOverrideSubmittedOverride:null})}))},r.removeOverride=function(){var e=r.props,t=e.computedItem,a=e.courseId;r.setState({gradeOverrideDataState:"removingOverride"}),u.default.removeOverride({learnerId:r.props.learnerId,courseId:a,itemId:t.id}).then(function(){r.setState({gradeOverrideDataState:"loaded",gradeOverride:null,showOverrideTool:!1})}).catch(function(){r.setState({gradeOverrideDataState:"error"})})},r.state={showOverrideTool:!1,showDeletionConfirm:!1,isSubmissionDeleted:t.isDeleted,gradeOverrideDataState:"idle",gradeOverride:null,gradeOverrideSubmittedOverride:null},r}(0,a.default)(PeerReviewAdminMessage,e);var t=PeerReviewAdminMessage.prototype;return t.componentDidMount=function componentDidMount(){var e=this,t=this.props,a=t.computedItem,r=t.learnerId,i=t.courseId;this.setState({gradeOverrideDataState:"loading"}),u.default.getOverride({learnerId:r,courseId:i,itemId:a.id}).then(function(t){var a=t.elements[0],r=t.linked["userPublicProfiles.v1"][0],i=r&&r.fullName?r.fullName:"Anonymous";e.setState({gradeOverrideDataState:"loaded",gradeOverride:{grade:100*a.grade,isPassed:a.isPassed,explanation:a.explanation,overriderName:i}})}).catch(function(t){404===t.status?e.setState({gradeOverrideDataState:"loaded"}):e.setState({gradeOverrideDataState:"error"})})},t.renderGradeOverriddenMessage=function renderGradeOverriddenMessage(e){var t=(0,i.default)("The grade for this submission has been adjusted to be passing at {gradePercent}\n        by {overriderName}."),a=(0,i.default)("The grade for this submission has been adjusted to be not passing at {gradePercent}\n        by {overriderName}.");return r.default.createElement("strong",null,r.default.createElement(d.FormattedMessage,{message:e.isPassed?t:a,gradePercent:r.default.createElement(d.FormattedNumber,{value:e.grade/100,style:"percent"}),overriderName:e.overriderName}))},t.renderOverrideMessage=function renderOverrideMessage(e,t){var a=this,n=(0,i.default)("adjust the grade"),s=(0,i.default)("adjust the grade again"),o=function renderOverrideToolLink(e){return r.default.createElement("span",{className:"admin-action",onClick:a.showOverrideTool},e)},d=r.default.createElement("span",{className:"admin-action",onClick:this.showDeletionConfirm},(0,i.default)("delete the submission"));return e?t?r.default.createElement("div",null,this.renderGradeOverriddenMessage(e)," ","",(0,i.default)("You may")," ",o(s),"."):r.default.createElement("div",null,this.renderGradeOverriddenMessage(e)," ","",(0,i.default)("You may")," ",o(s)," or ","",d,"."):t?r.default.createElement("div",null,(0,i.default)("Even though it has been deleted, as an administrator, you may")," ","",o(n)," ",(0,i.default)("attributed to it"),"."):r.default.createElement("div",null,(0,i.default)("As an administrator, you may")," ","",o(n)," or ",d,".")},t.renderAdminBox=function renderAdminBox(e){var t=r.default.createElement("div",null,r.default.createElement("span",{className:"bold-text"},(0,i.default)("This submission was deleted. It is not available for other learners to review."))),a=this.context.router.location.pathname,s=l.default.join(a.split("/").slice(0,-1)),o=r.default.createElement("div",null,(0,i.default)("To leave a review"),", ","",r.default.createElement(n.Link,{to:s},(0,i.default)("view this submission as a learner")),".");switch(this.state.gradeOverrideDataState){case"idle":case"loading":return r.default.createElement("div",null,(0,i.default)("Loading..."));case"error":return r.default.createElement("div",null,(0,i.default)("Error loading grade override information."));default:return r.default.createElement("div",null,this.state.isSubmissionDeleted&&t,this.renderOverrideMessage(e,this.state.isSubmissionDeleted),!this.state.isSubmissionDeleted&&o)}},t.render=function render(){var e=this.props,t=e.computedItem,a=e.courseId,i="submittingOverride"===this.state.gradeOverrideDataState?this.state.gradeOverrideSubmittedOverride:this.state.gradeOverride;return r.default.createElement("div",{className:"rc-PeerReviewAdminMessage bt3-alert"},r.default.createElement("div",{className:"horizontal-box"},r.default.createElement("div",{className:"kss-modifier--icon admin-warning-outer"},r.default.createElement("span",{className:"cif-warning admin-warning"})),r.default.createElement("div",{className:"flex-1"},this.renderAdminBox(i))),this.state.showOverrideTool&&r.default.createElement(s.default,{handleClose:this.hideOverrideTool,gradeOverrideDataState:this.state.gradeOverrideDataState,gradeOverride:i,submitOverride:this.submitOverride,removeOverride:this.removeOverride,computedItem:t}),this.state.showDeletionConfirm&&r.default.createElement(o.default,{courseId:a,handleClose:this.hideDeletionConfirm,computedItem:t,submissionId:this.props.submissionId,handleDeleteSubmission:this.handleDeleteSubmission}))},PeerReviewAdminMessage}(r.default.Component);f.propTypes={courseId:r.default.PropTypes.string.isRequired,computedItem:r.default.PropTypes.object.isRequired,isDeleted:r.default.PropTypes.bool,submissionId:r.default.PropTypes.string.isRequired,learnerId:r.default.PropTypes.number},f.contextTypes={router:r.default.PropTypes.object.isRequired};var v=function(e){function PeerReviewAdminMessageWithPermissions(){return e.apply(this,arguments)||this}var t;return(0,a.default)(PeerReviewAdminMessageWithPermissions,e),PeerReviewAdminMessageWithPermissions.prototype.render=function render(){return r.default.createElement(c.default,{requestedCapability:m.PeerAdminCapabilities.reviewMentorGraded},r.default.createElement(f,this.props))},PeerReviewAdminMessageWithPermissions}(r.default.Component);exports.default=v},"7Y//":function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.fluxibleContextConnector=exports.comp=exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("8cuT")),s=a(e("VYij")),o=a(e("Akn8")),d=t(e("LnHh")),l=e("nLAy"),u=a(e("bnPc")),c=a(e("TTO7")),m=a(e("L1vm")),f=a(e("dAof")),v=a(e("jsrg")),p=a(e("JkvR")),b=a(e("yhVA")),g=a(e("sQ/U")),h=function(e){function PeerItemReviewNext(t,a){var r;return(r=e.call(this,t,a)||this).handleReviewChange=function(e){return function(t){r.context.executeAction(d.localUpdateReview,{reviewSchemaPartId:e,change:t,submissionId:r.props.submissionId})}},r.handleReviewSubmit=function(){var e=r.props,t=e.computedItem,a=e.reviewSubmissionState,i=e.submissionId,n=e.courseId;r.setState({loadNextSubmission:!0}),a&&a.review&&r.context.executeAction(d.submit,{itemId:t.id,review:a.review,submissionId:i,userId:g.default.get().id,courseId:n})},r.state={loadNextSubmission:!1},r}(0,r.default)(PeerItemReviewNext,e);var t=PeerItemReviewNext.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,a=t.computedItem,r=t.courseId,i;e.reviewSubmissionState&&"submitted"===e.reviewSubmissionState.submitState&&this.state.loadNextSubmission?(this.setState({loadNextSubmission:!1}),this.context.executeAction(l.loadNextReviewQueueSubmission,{userId:g.default.get().id,courseId:r,itemId:a.id})):"loading"===this.props.loadState&&"none"===e.loadState&&this.context.router.push(o.default.join(a.resourcePath,"give-feedback"))},t.render=function render(){var e=this.props,t=e.loadState,a=e.submissionAndRelated,r=e.canReviewOthers,n=e.naptimeSubmission,s=e.naptimeSubmissionSchema,o=e.computedItem,d=e.courseId;if(!r)return i.createElement(c.default,{computedItem:o});if("loading"===t||"none"===t)return i.createElement("p",null,(0,b.default)("Loading..."));if("loadError"===t)return i.createElement("p",null,(0,b.default)("Error loading submission."));if("loaded"===t&&null!=a){var l=this.props,m=l.reviewSubmissionState,f=l.flaggedPreviousSubmission;return i.createElement(u.default,{courseId:d,computedItem:o,submission:a.submission,submissionSchema:a.submissionSchema,naptimeSubmission:n,naptimeSubmissionSchema:s,reviewSubmissionState:m,createdAt:a.submission.createdAt,creatorProfile:a.userProfiles[0],onReviewChange:this.handleReviewChange,onReviewSubmit:this.handleReviewSubmit,flaggedPreviousSubmission:f,isAdminMode:!1,isDeleted:a.isDeleted,votes:a.votes})}return null},PeerItemReviewNext}(i.Component);h.contextTypes={executeAction:i.PropTypes.func.isRequired,router:i.PropTypes.object.isRequired};var S=function fluxibleContextConnector(e,t){var a=t.computedItem,r=t.courseId,i=t.canReviewOthers,n=t.isOwnSubmission,s=t.loadState;i&&(n||"loaded"!==s)&&e.executeAction(l.loadNextReviewQueueSubmission,{userId:g.default.get().id,courseId:r,itemId:a.id})};exports.fluxibleContextConnector=S;var E,I=s.default.compose(m.default.createTrackedContainer(function(){return{namespace:{page:"peer_review_review_peers_detail"}}}),(0,n.default)(["PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e,t){var a=e.PeerViewSubmissionStore,r=e.PeerPermissionsAndProgressesStore;return{loadState:a.getState().loadState,havePermissionsLoaded:"loaded"===r.getState().loadState,reviewSubmissionState:a.getState().reviewSubmissionState,submissionAndRelated:a.getState().submissionAndRelated,naptimeSubmission:a.getState().naptimeSubmission,naptimeSubmissionSchema:a.getState().naptimeSubmissionSchema,submissionId:a.getState().submissionId,flaggedPreviousSubmission:a.getState().flaggedPreviousSubmission,canReviewOthers:(0,s.default)(r.getState().capabilities||[]).contains("reviewPeers"),isOwnSubmission:a.getState().isOwnSubmission}}),(0,v.default)(function(e){return e.havePermissionsLoaded},i.createElement(p.default,{className:"rc-PeerItemReviewNext"})),(0,f.default)(S))(h);exports.default=I;var w=h;exports.comp=w},AMJS:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t(e("VbXa")),r=t(e("sbe7")),i=t(e("17x9")),n=t(e("8cuT")),s=t(e("MXD1")),o=t(e("R59W")),d=t(e("2O/4")),l=e("6gRZ"),u=t(e("yhVA"));e("2dz7");var c=function(e){function AdminViewGradeOverride(t){var a;if((a=e.call(this,t)||this).handleGradeInputChange=function(e){a.setState({grade:e})},a.handleExplanationChange=function(e){a.setState({isForPlagiarism:"Plagiarism"===e.target.value})},a.handleCustomExplanationChange=function(e){a.setState({customExplanation:e.target.value})},a.submitOverride=function(){var e=a.state.isForPlagiarism?"Plagiarism":a.state.customExplanation;a.props.submitOverride(a.state.grade,e)},a.props.gradeOverride){var r="Plagiarism"===a.props.gradeOverride.explanation,i=r?"":a.props.gradeOverride.explanation;a.state={grade:a.props.gradeOverride.grade,isForPlagiarism:r,customExplanation:i}}else a.state={grade:0,isForPlagiarism:!0,customExplanation:""};return a}(0,a.default)(AdminViewGradeOverride,e);var t=AdminViewGradeOverride.prototype;return t.isInputEnabled=function isInputEnabled(){return"loaded"===this.props.gradeOverrideDataState},t.renderNoteForPlagiarism=function renderNoteForPlagiarism(){return r.default.createElement("div",{className:"details"},r.default.createElement("div",{className:"learners-note"},(0,u.default)("Learners will see this message:")),r.default.createElement(d.default,null))},t.renderNoteForOtherReason=function renderNoteForOtherReason(){var e=!this.isInputEnabled();return r.default.createElement("div",{className:"details"},r.default.createElement("div",{className:"learners-note"},(0,u.default)("Learners will see this message:")),r.default.createElement("div",null,r.default.createElement("textarea",{className:"explanation",onChange:this.handleCustomExplanationChange,disabled:e,value:this.state.customExplanation})))},t.renderMainContent=function renderMainContent(){var e=this.props,t=e.branchId,a=e.itemId,i=r.default.createElement(l.Tooltip,{className:"rc-AdminViewGradeOverride-button-revert-tooltip"},(0,u.default)("Restore original grade. Any admin overrides will be removed.")),n=!this.isInputEnabled();return r.default.createElement("div",{className:"authoring-type"},r.default.createElement("div",{className:"horizontal-box input-row"},r.default.createElement("div",{className:"input-label"},(0,u.default)("Score")),r.default.createElement("div",{className:"flex-1"},r.default.createElement(s.default,{initialValue:this.state.grade,min:0,max:100,width:50,height:35,allowDecimal:!1,allowNegative:!1,onChange:this.handleGradeInputChange,disabled:n}),"%",r.default.createElement("div",{className:"details passing-threshold"},(0,u.default)("Passing Threshold:")," Â  ",r.default.createElement(o.default,{courseBranchId:t,itemId:a})),(this.state.grade<0||this.state.grade>100)&&r.default.createElement("span",{className:"alertMessageMargin"},(0,u.default)("Grade needs to be a number in between 0 and 100, inclusive.")))),r.default.createElement("div",{className:"horizontal-box input-row"},r.default.createElement("div",{className:"input-label"},(0,u.default)("Reason:")),r.default.createElement("div",{className:"flex-1"},r.default.createElement("div",{className:"horizontal-box"},r.default.createElement("input",{id:"rc-AdminViewGradeOverride-plagiarism",name:"explanation",type:"radio",value:"Plagiarism",className:"option-radio",onChange:this.handleExplanationChange,checked:this.state.isForPlagiarism,disabled:n}),r.default.createElement("label",{htmlFor:"rc-AdminViewGradeOverride-plagiarism",className:"label-radio"}),r.default.createElement("div",{className:"radioPadding flex-1"},r.default.createElement("span",null,(0,u.default)("Plagiarism")),this.state.isForPlagiarism&&this.renderNoteForPlagiarism())),r.default.createElement("div",{className:"horizontal-box"},r.default.createElement("input",{id:"rc-AdminViewGradeOverride-other",name:"explanation",type:"radio",value:"Other",className:"option-radio",onChange:this.handleExplanationChange,checked:!this.state.isForPlagiarism,disabled:n}),r.default.createElement("label",{htmlFor:"rc-AdminViewGradeOverride-other",className:"label-radio"}),r.default.createElement("div",{className:"radioPadding flex-1"},r.default.createElement("span",null,(0,u.default)("Other")),!this.state.isForPlagiarism&&this.renderNoteForOtherReason())))),r.default.createElement("div",{className:"horizontal-box align-items-right"},!!this.props.gradeOverride&&r.default.createElement(l.OverlayTrigger,{placement:"bottom",overlay:i,delayShow:0},r.default.createElement("button",{className:"bt3-btn",onClick:this.props.removeOverride,disabled:n},"removingOverride"===this.props.gradeOverrideDataState?(0,u.default)("Reverting..."):(0,u.default)("Revert"))),r.default.createElement("div",{className:"horizontal-box flex-1 align-items-right"},r.default.createElement("button",{className:"bt3-btn bt3-btn-primary button-save",onClick:this.submitOverride,disabled:n},"submittingOverride"===this.props.gradeOverrideDataState?(0,u.default)("Saving..."):(0,u.default)("Save")))),r.default.createElement("div",{className:"horizontal-box align-items-right"},"error"===this.props.gradeOverrideDataState&&r.default.createElement("span",null,(0,u.default)("Problem connecting to server. Try again later."))))},t.render=function render(){return r.default.createElement("div",{className:"rc-AdminViewGradeOverride"},r.default.createElement("h3",null,(0,u.default)("Override Grade")),this.state.loadingData&&r.default.createElement("div",null,(0,u.default)("Loading"),"..."),!this.state.loadingData&&this.renderMainContent())},AdminViewGradeOverride}(r.default.Component);c.propTypes={gradeOverrideDataState:i.default.string.isRequired,gradeOverride:i.default.object,submitOverride:i.default.func,removeOverride:i.default.func,branchId:i.default.string,itemId:i.default.string};var m=(0,n.default)(["SessionStore"],function(e){var t;return{branchId:e.SessionStore.getBranchId()}})(c);exports.default=m},Al8r:function(module,exports,e){},DnT3:function(module,exports,e){var t=e("LEWO"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},HKH7:function(module,exports,e){},JMbT:function(module,exports,e){},JdPj:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("8cuT")),s=a(e("VYij")),o=a(e("cBJM")),d=a(e("LcDL")),l=e("nLAy"),u=function(e){function PeerSubmissionFlagger(t,a){var r;return(r=e.call(this,t,a)||this).onClickButton=function(){r.setState({isModalOpen:!0})},r.onCloseModal=function(){r.setState({isModalOpen:!1})},r.onReportSubmission=function(e){var t=r.props,a=t.computedItem.id,i=t.courseId,n=t.submissionId;r.context.executeAction(l.flagSubmission,{itemId:a,courseId:i,submissionId:n,report:e})},r.state={isModalOpen:!1},r}(0,r.default)(PeerSubmissionFlagger,e);var t=PeerSubmissionFlagger.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){"flagging"===this.props.flagSubmissionState&&"flagged"===e.flagSubmissionState&&this.onCloseModal()},t.render=function render(){return i.createElement("div",{className:"rc-PeerSubmissionFlagger",style:{float:"right",paddingLeft:"8px"}},i.createElement(d.default,{onClick:this.onClickButton}),this.state.isModalOpen&&i.createElement(o.default,{onReportSubmission:this.onReportSubmission,onClose:this.onCloseModal,flagSubmissionState:this.props.flagSubmissionState,error:this.props.flagSubmissionError}))},PeerSubmissionFlagger}(i.Component);u.contextTypes={executeAction:i.PropTypes.func.isRequired};var c=s.default.compose((0,n.default)(["PeerViewSubmissionStore"],function(e){var t=e.PeerViewSubmissionStore;return{flagSubmissionState:t.getState().flagSubmissionState,flagSubmissionError:t.getState().flagSubmissionError}}))(u);exports.default=c},LEWO:function(module,exports,e){},LcDL:function(module,exports,e){"use strict";var t=e("TqRt"),a=e("284h");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("sbe7")),i=t(e("y1LI")),n=t(e("yhVA")),s,o=function SubmissionFlaggerButton(e){var t=e.onClick;return r.createElement("button",{className:"rc-SubmissionFlaggerButton button-link",onClick:t},r.createElement("span",{className:"caption-text"},r.createElement(i.default,{name:"flag-o"}),r.createElement("span",{style:{paddingLeft:8}},(0,n.default)("Flag this submission"))))};exports.default=o},LnHh:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localUpdateReview=exports.submit=void 0;var t=e("lvQJ"),a=e("vpeK"),r=e("biwp"),i=e("Nher"),n=e("oucI"),s=function onSubmitSuccess(e,t,s,o,d){return function(){e.executeAction(a.getProgress,{courseId:o,refreshProgress:!0}),e.dispatch(n.ActionNames.REVIEW_SUBMISSION_SUBMITTED,{submissionId:t}),e.executeAction(i.refreshCourseViewGrade,{courseId:o}),e.executeAction(r.loadCourseMaterials,{courseSlug:d,refetch:!0})}},o=function onSubmitFailure(e,t){return function(a){var r=a.responseJSON||{};if("InvalidReview"===r.errorCode)e.dispatch(n.ActionNames.REVIEW_SUBMISSION_SUBMIT_ERROR,{submissionId:t,errorType:"invalid-review",reviewValidationErrors:r.details});else if("ReviewExists"===r.errorCode)e.dispatch(n.ActionNames.REVIEW_SUBMISSION_SUBMIT_ERROR,{submissionId:t,errorType:"review-exists"});else if(e.dispatch(n.ActionNames.REVIEW_SUBMISSION_SUBMIT_ERROR,{submissionId:t,errorType:"unknown"}),!a.responseJSON)throw a}},d=function submit(e,a){var r=a.itemId,i=a.submissionId,d=a.review,l=a.userId,u=a.courseId,c=a.courseSlug;return e.dispatch(n.ActionNames.REVIEW_SUBMISSION_SUBMITTING,{submissionId:i}),(0,t.createReview)(u,r,i,d).then(s(e,i,l,u,c)).catch(o(e,i))};exports.submit=d;var l=function localUpdateReview(e,t){var a=t.submissionId,r=t.reviewSchemaPartId,i=t.change;e.dispatch(n.ActionNames.REVIEW_SUBMISSION_LOCAL_UPDATE_REVIEW,{submissionId:a,reviewSchemaPartId:r,change:i})};exports.localUpdateReview=l},LzTH:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("0xvN")),s=a(e("SXF+")),o=a(e("JdPj")),d=a(e("tapA")),l=a(e("UjVa")),u=a(e("sQ/U")),c=a(e("8cuT")),m=function(e){function SubmissionHeader(){return e.apply(this,arguments)||this}var t;return(0,r.default)(SubmissionHeader,e),SubmissionHeader.prototype.render=function render(){var e=this.props,t=e.isAdminMode,a=e.computedItem,r=e.submission,c=e.creatorProfile,m=e.votes,f=e.courseId,v=c.userId,p;return u.default.get().id===v?i.createElement(n.default,{title:r.definition.title,createdAt:r.createdAt,shareableLink:i.createElement(l.default,{computedItem:a,submissionId:r.id})}):i.createElement(s.default,{isAdminMode:t,title:r.definition.title,createdAt:r.createdAt,creatorProfile:c,submissionId:r.id,reviewMetadata:i.createElement("div",null,i.createElement(o.default,{courseId:f,computedItem:a,submissionId:r.id}),i.createElement(d.default,{courseId:f,computedItem:a,submissionId:r.id,votes:m}))})},SubmissionHeader}(i.Component),f=(0,c.default)(["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}})(m);exports.default=f},R59W:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("MVZn")),i=a(e("VkAN")),n=t(e("sbe7")),s=a(e("w/1P")),o=e("PDuk"),d=a(e("lTCR")),l=e("oJmH");function _templateObject(){var e=(0,i.default)(["\n  query OnDemandCourseGradeItemPassingFractionsV1Query($branchItemId: String!) {\n    OnDemandCourseGradeItemPassingFractionsV1 @naptime {\n      get(id: $branchItemId) {\n        elements {\n          id\n          passingFraction\n        }\n      }\n    }\n  }\n"]);return _templateObject=function _templateObject(){return e},e}e("zn7j");var u=function PassingThreshold(e){var t=e.loading,a=e.passingFraction,r=e.className;return n.createElement("div",{className:(0,s.default)("rc-PassingThreshold","v2",r)},t?n.createElement("div",{className:"placeholder"}):"".concat(100*(a||0),"%"))},c=(0,d.default)(_templateObject()),m,f=(0,l.graphql)(c,{options:function options(e){return{variables:{branchItemId:(0,o.tupleToStringKey)([e.courseBranchId,e.itemId])}}},props:function props(e){var t=e.data,a=e.ownProps,i=t||{},n=i.loading,s=i.OnDemandCourseGradeItemPassingFractionsV1,o,d=(s&&s.get&&s.get.elements&&s.get.elements[0]||{}).passingFraction;return(0,r.default)({},a,{loading:n,passingFraction:d})}})(u);exports.default=f},"SXF+":function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("BN6r")),s=a(e("at5l")),o=a(e("xJs7")),d=e("kvW3"),l=e("0jv7"),u=a(e("yhVA"));e("b3MV");var c=function(e){function PeerSubmissionHeader(){return e.apply(this,arguments)||this}var t;return(0,r.default)(PeerSubmissionHeader,e),PeerSubmissionHeader.prototype.render=function render(){var e=this.props,t=e.isAdminMode,a=e.title,r=e.createdAt,c=e.creatorProfile,m=e.submissionId,f=c.photoUrl||l.defaultPhotoUrl;return i.createElement("div",{className:"rc-PeerSubmissionHeader bt3-clearfix"},!t&&i.createElement("div",{className:"bt3-pull-right"},i.createElement(o.default,{submissionId:m})),i.createElement("div",{className:"headline-4-text"},a),i.createElement("div",{className:"author-container horizontal-box"},i.createElement(s.default,{alt:(0,u.default)("Photo of learner"),src:f}),i.createElement("div",{className:"metadata-area"},i.createElement("div",null,i.createElement(d.FormattedMessage,{className:"display-1-text pii-hide",message:(0,u.default)("by {creatorName}"),creatorName:c.fullName})),i.createElement("div",null,i.createElement("span",{className:"caption-text color-secondary-text"},(0,n.default)(r).format("LL")),t&&i.createElement("span",{className:"caption-text color-secondary-text",style:{marginLeft:12}},i.createElement(d.FormattedMessage,{className:"caption-text color-secondary-text",message:(0,u.default)("User Id: {userId}"),userId:c.userId})))),i.createElement("div",{className:"actions-area align-right align-self-end flex-1"},this.props.reviewMetadata)))},PeerSubmissionHeader}(i.Component);c.propTypes={isAdminMode:i.PropTypes.bool.isRequired,title:i.PropTypes.string.isRequired,createdAt:i.PropTypes.number.isRequired,creatorProfile:i.PropTypes.object.isRequired,submissionId:i.PropTypes.string.isRequired,reviewMetadata:i.PropTypes.node.isRequired};var m=c;exports.default=m},Txc6:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("CQyo")),s=a(e("yhVA")),o=a(e("sQ/U")),d=t(e("Xl8Z"));e("gvD1");var l,u=function(e){function AdminDeletionConfirmModal(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={deleting:!1,deletionFailed:!1},t.handleRemoveGradeOverride=function(){t.setState({deleting:!0,deletionFailed:!1});var e=t.props,a=e.computedItem,r=e.courseId,i=e.submissionId,n;d.deleteSubmission({userId:o.default.get().id,itemId:a.id,courseId:r,submissionId:i}).then(function(e){t.props.handleDeleteSubmission(),t.props.handleClose()}).catch(function(e,a,r){t.setState({deletionFailed:!0,deleting:!1})})},t}var t;return(0,r.default)(AdminDeletionConfirmModal,e),AdminDeletionConfirmModal.prototype.render=function render(){return i.createElement(n.default,{className:"rc-AdminDeletionConfirmModal",allowClose:!0,modalName:"AdminDeletionConfirmModal",type:"box",handleClose:this.props.handleClose},i.createElement("div",{className:"browser-alert-container horizontal-box align-items-absolute-center"},i.createElement("div",{className:"browser-alert"},(0,s.default)("Browser Alert"))),i.createElement("div",null,i.createElement("div",{className:"confirm-question"},(0,s.default)("Are you sure you want to delete this submission? This action cannot be reversed.")),i.createElement("div",{className:"horizontal-box align-items-absolute-center"},i.createElement("button",{className:"bt3-btn yes-button",onClick:this.handleRemoveGradeOverride},this.state.deleting?(0,s.default)("Deleting"):(0,s.default)("Yes")),i.createElement("button",{className:"bt3-btn",onClick:this.props.handleClose},(0,s.default)("No")))),this.state.deletionFailed&&i.createElement("div",{className:"horizontal-box align-items-absolute-center"},(0,s.default)("Can't delete now, please try again later"),"."))},AdminDeletionConfirmModal}(i.Component);exports.default=u},"Y08+":function(module,exports,e){var t=e("Al8r"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},YeA8:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t(e("VbXa")),r=t(e("sbe7")),i=t(e("17x9")),n=t(e("CQyo")),s=t(e("AMJS"));e("ya0v");var o=function(e){function AdminViewGradeOverrideModal(){return e.apply(this,arguments)||this}var t;return(0,a.default)(AdminViewGradeOverrideModal,e),AdminViewGradeOverrideModal.prototype.render=function render(){var e=this.props,t=e.computedItem,a=e.handleClose,i=e.gradeOverrideDataState,o=e.gradeOverride,d=e.submitOverride,l=e.removeOverride;return r.default.createElement(n.default,{className:"rc-AdminViewGradeOverrideModal",allowClose:!0,modalName:"AdminViewGradeOverrideModal",type:"box",handleClose:a},r.default.createElement(s.default,{gradeOverrideDataState:i,gradeOverride:o,submitOverride:d,removeOverride:l,itemId:t.id}))},AdminViewGradeOverrideModal}(r.default.Component);o.propTypes={handleClose:i.default.func,gradeOverrideDataState:i.default.string.isRequired,gradeOverride:i.default.object,submitOverride:i.default.func,removeOverride:i.default.func,computedItem:i.default.object};var d=o;exports.default=d},YhZP:function(module,exports,e){"use strict";var t=e("284h");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t(e("sbe7")),r,i=function AssignmentSuccessMessage(e){var t=e.children;return a.createElement("div",{className:"rc-AssignmentSuccessMessage horizontal-box flex-1 bgcolor-success-light color-success-dark",style:{margin:"12px 0px",padding:16}},t)};exports.default=i},b3MV:function(module,exports,e){var t=e("JMbT"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},bnPc:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=e("C+yd"),n=t(e("sbe7")),s=a(e("UZuA")),o=a(e("YhZP")),d=a(e("0/FW")),l=a(e("BDnG")),u=a(e("Fp6O")),c=a(e("s9jG")),m=a(e("sQ/U")),f=a(e("D1gF")),v=a(e("iZMp")),p=a(e("LzTH")),b=a(e("3v1K")),g=a(e("yhVA")),h,S=function(e){function PeerPublicSubmissionView(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).renderFormParts=function(e){var a=t.props,r=a.reviewSubmissionState,s=a.isAdminMode,o=a.computedItem,d=a.submission,c=r.backboneReviewSchema,m=r.review,f;if(0===c.getPartsForSubmissionSchemaPart(e).length)return null;return t.showDisplayPartsOnly()?n.createElement(u.default,{reviewSchema:c,reviews:t.getReviews(),submissionSchemaPartId:e,submissionId:d.id}):null!=m?n.createElement(l.default,{disabled:t.isFormDisabled(),reviewSchema:c,review:m.parts,submissionSchemaPartId:e,onChange:t.props.onReviewChange,isMentorGraded:(0,i.getIsMentorGraded)(o)||s,submissionId:d.id,reviewValidationErrors:r.reviewValidationErrors}):null},t.renderAdminMessage=function(){var e=t.props,a=e.courseId,r=e.isAdminMode,i=e.computedItem,s=e.submission,o=e.isDeleted,d=e.creatorProfile;return r?n.createElement(b.default,{courseId:a,computedItem:i,submissionId:s.id,isDeleted:o,learnerId:d.userId}):n.createElement("noscript",null)},t}(0,r.default)(PeerPublicSubmissionView,e);var t=PeerPublicSubmissionView.prototype;return t.getReviews=function getReviews(){var e=this.props,t=e.isAdminMode,a,r=e.reviewSubmissionState.backboneReviews;if(t)return r;return[]},t.showDisplayPartsOnly=function showDisplayPartsOnly(){var e=this.props.creatorProfile.userId;return this.props.isAdminMode||e===m.default.get().id},t.isFormDisabled=function isFormDisabled(){var e=this.props.reviewSubmissionState.submitState;return"submitting"===e||"submitted"===e},t.render=function render(){var e=this.props,t=e.computedItem,a=e.submission,r=e.reviewSubmissionState,i=e.isAdminMode,l=e.flaggedPreviousSubmission,u=e.isDeleted,m=e.creatorProfile,f=e.votes,b=e.courseId,h=e.naptimeSubmission,S=e.naptimeSubmissionSchema,E=e.onReviewSubmit;return n.createElement(s.default,{trackingName:"render",className:"rc-SubmittedSubmissionView",trackClicks:!1,requireFullyVisible:!1,data:{submission_id:a.id},withVisibilityTracking:!0},this.renderAdminMessage(),l&&n.createElement(o.default,null,(0,g.default)("The previous submission was successfully flagged. You can review a different submission below.")),n.createElement(p.default,{isAdminMode:i,computedItem:t,submission:a,creatorProfile:m,votes:f}),n.createElement(v.default,{submission:h,submissionSchema:S,renderInlineNode:this.renderFormParts}),!this.showDisplayPartsOnly()&&n.createElement(c.default,{disabled:this.isFormDisabled(),errorType:r.errorType||"none",reviewEditable:"submitted"!==r.submitState,onSubmit:E}),null!=a.id&&!u&&n.createElement(d.default,{computedItem:t,courseId:b,submissionId:a.id}))},PeerPublicSubmissionView}(n.Component);exports.default=S},cBJM:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("w/1P")),s=a(e("VYij")),o=e("kvW3"),d=a(e("CQyo")),l=a(e("eJW0"));e("0Lal");var u=[{value:"incompleteSubmission",label:(0,l.default)("The submission is incomplete")},{value:"inappropriateContent",label:(0,l.default)("The submission contains inappropriate content")},{value:"plagiarism",label:(0,l.default)("The submission contains plagiarized content")},{value:"other",label:(0,l.default)("Other (please provide details below)")}],c=function(e){function SubmissionFlaggerModal(t,a){var r;return(r=e.call(this,t,a)||this).onEvidenceChange=function(e){e.target instanceof HTMLTextAreaElement&&r.setState({evidence:e.target.value})},r.onReasonChange=function(e){if(e.target instanceof HTMLSelectElement){var t=e.target.value,a=(0,s.default)(u).find(function(e){return e.value===t});a&&r.setState({selectedReason:a.value})}},r.onSendReportButtonClick=function(e){e.preventDefault(),r.props.onReportSubmission({reason:r.state.selectedReason,evidence:r.state.evidence})},r.state={selectedReason:t.defaultReason,evidence:""},r}var t;return(0,r.default)(SubmissionFlaggerModal,e),SubmissionFlaggerModal.prototype.render=function render(){var e=this.state.selectedReason,t=this.props,a=t.reasons,r=t.error,s=t.flagSubmissionState,u=(0,n.default)("bt3-btn bt3-btn-warning c-modal-action-button",{"bt3-disabled":"flagging"===s});return i.createElement(d.default,{modalName:"SubmissionFlaggerModal",handleClose:this.props.onClose},i.createElement("div",{className:"rc-SubmissionFlaggerModal"},i.createElement("h3",{className:"c-modal-title subtitle"},(0,l.default)("Flag this submission")),i.createElement("div",null,r&&r.responseJSON&&i.createElement("div",null,i.createElement("p",null,i.createElement(o.FormattedMessage,{message:(0,l.default)("An error occurred submitting your report: #{errorMessage}"),errorMessage:r.responseJSON}))),i.createElement("div",null,i.createElement("form",null,i.createElement("div",{className:"field-container"},i.createElement("label",{htmlFor:"reason-selection"},(0,l.default)("Select a reason:")),i.createElement("select",{id:"reason-selection",className:"field",disabled:"flagging"===s,value:e,onChange:this.onReasonChange},a.map(function(e){return i.createElement("option",{key:e.value,value:e.value},e.label)}))),i.createElement("div",{className:"field-container"},i.createElement("label",{htmlFor:"reason-field"},(0,l.default)("Please explain or provide evidence below:")),i.createElement("textarea",{id:"reason-field",onChange:this.onEvidenceChange,className:"field",disabled:"flagging"===s})),i.createElement("div",{className:"c-modal-action-bar"},"flagging"===s&&i.createElement("span",null,(0,l.default)("Submitting report...")),i.createElement("button",{className:u,onClick:this.onSendReportButtonClick},(0,l.default)("Send report"))))))))},SubmissionFlaggerModal}(i.Component);c.propTypes={error:i.PropTypes.object,onClose:i.PropTypes.func.isRequired,onReportSubmission:i.PropTypes.func.isRequired,defaultReason:i.PropTypes.string.isRequired,reasons:i.PropTypes.arrayOf(i.PropTypes.object).isRequired,flagSubmissionState:i.PropTypes.string.isRequired},c.defaultProps={defaultReason:"incompleteSubmission",reasons:u};var m=c;exports.default=m},dFkQ:function(module,exports,e){},db2b:function(module,exports,e){},eCNr:function(module,exports,e){},gvD1:function(module,exports,e){var t=e("dFkQ"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},lvQJ:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.createReview=void 0;var a=t(e("wiyT")),r,i=(0,t(e("DnuM")).default)("/api/onDemandPeerAuthoredReviews.v1",{type:"rest"}),n=function createReview(e,t,r,n){return(0,a.default)(i.post("",{data:{peerSubmissionId:"".concat(e,"~").concat(t,"~").concat(r),review:n}}))};exports.createReview=n},qaVx:function(module,exports,e){},s9jG:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t(e("VbXa")),r=t(e("sbe7")),i=t(e("wO3E")),n=t(e("7PCW")),s=e("4R3V"),o=t(e("37kS"));e("0UBe");var d=function FormError(e){var t;switch(e.errorType){case"invalid-review":return r.default.createElement("span",null,(0,o.default)("You must fill in all the fields above."));case"review-exists":return r.default.createElement("span",null,(0,o.default)('\n            You have already reviewed this submission. Click the "Review classmates" tab to get another\n            submission.\n          '));case"unknown":return r.default.createElement("span",null,(0,o.default)("Error submitting. Please try again."));default:return r.default.createElement("noscript",null)}},l=function(e){function FormSubmit(){return e.apply(this,arguments)||this}var t;return(0,a.default)(FormSubmit,e),FormSubmit.prototype.render=function render(){if(!this.props.reviewEditable)return null;var e=r.default.createElement("div",{className:"rc-FormSubmit"},r.default.createElement("div",null,r.default.createElement(i.default,{className:"primary",onClick:this.props.onSubmit,disabled:this.props.disabled,trackingName:"submit"},(0,o.default)("Submit Review"))),r.default.createElement("div",null,r.default.createElement(d,{errorType:this.props.errorType})));return this.props.isMentorGraded?r.default.createElement(n.default,{requestedCapability:s.PeerAdminCapabilities.reviewMentorGraded},e):e},FormSubmit}(r.default.Component);l.propTypes={errorType:r.default.PropTypes.oneOf(["none","invalid-review","unknown"]).isRequired,disabled:r.default.PropTypes.bool.isRequired,reviewEditable:r.default.PropTypes.bool.isRequired,onSubmit:r.default.PropTypes.func.isRequired,isMentorGraded:r.default.PropTypes.bool};var u=l;exports.default=u},sMNq:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t(e("wiyT")),r=t(e("DnuM")),i=t(e("PDuk")),n=(0,r.default)("",{type:"rest"}),s="/api/onDemandCourseGradeItemOutcomeOverrides.v1/",o={getOverride:function getOverride(e){var t=i.default.tupleToStringKey([e.learnerId.toString(),e.courseId,e.itemId]),r,o=s+t+"?fields=grade,isPassed,explanation,userPublicProfiles.v1(fullName)&includes=publicProfiles";return(0,a.default)(n.get(o))},updateOverride:function updateOverride(e){var t=i.default.tupleToStringKey([e.learnerId.toString(),e.courseId,e.itemId]),r=s+t;return(0,a.default)(n.put(r,{data:{grade:e.grade,isPassed:e.isPassed,explanation:e.explanation}}))},removeOverride:function removeOverride(e){var t=i.default.tupleToStringKey([e.learnerId.toString(),e.courseId,e.itemId]),r=s+t;return(0,a.default)(n.delete(r))}};exports.default=o},tapA:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("y1LI")),s=e("kvW3"),o=a(e("wO3E")),d=e("nLAy"),l=a(e("yhVA"));e("Y08+");var u=function(e){function SubmissionLikeButton(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).toggleLike=function(){var e=t.props,a=e.computedItem.id,r=e.courseId,i=e.submissionId,n;e.votes.isUpvotedByUser?t.context.executeAction(d.unlikeSubmission,{itemId:a,courseId:r,submissionId:i}):t.context.executeAction(d.likeSubmission,{itemId:a,courseId:r,submissionId:i})},t}var t;return(0,r.default)(SubmissionLikeButton,e),SubmissionLikeButton.prototype.render=function render(){var e=this.props.votes,t=(0,l.default)("like"),a="heart-o";return e.upVotes>0&&(t=i.createElement(s.FormattedHTMLMessage,{message:(0,l.default)("{likeCount} {likeCount, plural, =1 {like} other {likes}}"),likeCount:e.upVotes})),e.isUpvotedByUser&&(a="heart"),i.createElement("div",{className:"rc-SubmissionLikeButton"},i.createElement(o.default,{className:"button-link",onClick:this.toggleLike,trackingName:"like",data:{unlike:e.isUpvotedByUser}},i.createElement("span",{className:"caption-text"},i.createElement(n.default,{name:a,className:"like-heart"}),t)))},SubmissionLikeButton}(i.Component);u.contextTypes={executeAction:i.PropTypes.func.isRequired};var c=u;exports.default=c},ubvS:function(module,exports,e){},xJs7:function(module,exports,e){"use strict";var t=e("284h"),a=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=a(e("VbXa")),i=t(e("sbe7")),n=a(e("yhVA")),s=a(e("Akn8")),o=a(e("7PCW")),d=e("4R3V"),l=function(e){function ViewAsAdminButton(){return e.apply(this,arguments)||this}var t;return(0,r.default)(ViewAsAdminButton,e),ViewAsAdminButton.prototype.render=function render(){return i.createElement(o.default,{requestedCapability:d.PeerAdminCapabilities.reviewMentorGraded},i.createElement("a",{href:this.context.router.location.pathname.indexOf("/review/")>-1?s.default.join(this.props.submissionId,"admin"):s.default.join("review",this.props.submissionId,"admin"),className:"link-button primary"},(0,n.default)("View as Admin")))},ViewAsAdminButton}(i.Component);l.propTypes={submissionId:i.PropTypes.string},l.contextTypes={router:i.PropTypes.object};var u=l;exports.default=u},ya0v:function(module,exports,e){var t=e("qaVx"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},zn7j:function(module,exports,e){var t=e("eCNr"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)}}]);
//# sourceMappingURL=29.611d58b36d7f1e6845b0.js.map